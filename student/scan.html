<!doctype html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | CPVC-Check</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå -->
  <link rel="stylesheet" href="../css/styles.css">

  <!-- ‡∏ï‡∏±‡∏ß‡∏™‡πÅ‡∏Å‡∏ô QR ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô JS ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ -->
  <script src="https://unpkg.com/html5-qrcode"></script>
  <!-- JS ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πÅ‡∏Å‡∏ô -->
  <script type="module" src="../js/student-scan.js" defer></script>

  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at 20% 20%, #1e293b, #020617 75%);
      font-family: "Inter", system-ui, sans-serif;
      color: #e5e7eb;
    }

    .scan-container {
      max-width: 680px;
      margin: 2.2rem auto;
      padding: 1.8rem 1.6rem 2.3rem;
      border-radius: 1.5rem;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(148,163,184,0.4);
      box-shadow: 0 22px 60px rgba(15,23,42,0.95);
    }

    .header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.4rem;
    }

    .avatar-circle {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      background: radial-gradient(circle at 30% 20%, #f9a8d4, #4f46e5);
      box-shadow: 0 0 18px rgba(236,72,153,0.7);
      flex-shrink: 0;
    }

    .user-text {
      line-height: 1.25rem;
    }
    .user-text .name {
      font-size: 1.05rem;
      font-weight: 600;
      color: #f9fafb;
    }
    .user-text .id {
      font-size: 0.85rem;
      color: #94a3b8;
    }

    h2 {
      margin: 0 0 .2rem 0;
      font-size: 1.5rem;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #94a3b8;
      margin-bottom: 1.2rem;
    }

    .mode-switch {
      display: flex;
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.45);
      overflow: hidden;
      margin-bottom: 1.3rem;
    }

    .mode-btn {
      flex: 1;
      padding: 0.7rem 0;
      border: none;
      background: transparent;
      color: #cbd5f5;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: .18s;
    }

    .mode-btn.active {
      background: linear-gradient(135deg,#4f46e5,#ec4899);
      color: #fff;
      box-shadow: 0 14px 32px rgba(79,70,229,0.7);
    }

    #reader {
      width: 100%;
      margin-top: .5rem;
      border-radius: 1rem;
      overflow: hidden;
      display: none; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ */
    }

    .token-box {
      margin-top: 1rem;
      display: none;
    }

    label {
      font-size: 0.85rem;
      color: #cbd5f5;
      display: block;
      margin-bottom: 0.35rem;
    }

    input[type="text"] {
      width: 100%;
      padding: 0.9rem;
      border-radius: 0.9rem;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.98);
      color: #e5e7eb;
      font-size: 0.95rem;
      outline: none;
    }

    input[type="text"]:focus {
      border-color: #4f46e5;
      box-shadow: 0 0 0 1px rgba(79,70,229,0.7);
    }

    .btn-main {
      width: 100%;
      margin-top: 1.4rem;
      padding: 0.95rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.98rem;
      background: linear-gradient(135deg,#22c55e,#16a34a);
      color: #fff;
      box-shadow: 0 18px 40px rgba(22,163,74,0.6);
    }

    #statusMsg {
      margin-top: 1rem;
      font-size: 0.9rem;
      text-align: center;
      min-height: 1.2rem;
    }

    /* Modal success */
    .success-modal {
      position: fixed;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(15,23,42,0.7);
      backdrop-filter: blur(4px);
      z-index: 50;
    }

    .success-card {
      width: 100%;
      max-width: 340px;
      padding: 1.9rem 1.7rem 1.6rem;
      border-radius: 1.4rem;
      background: radial-gradient(circle at top, #22c55e33, #020617 75%);
      border: 1px solid rgba(34,197,94,0.7);
      box-shadow: 0 22px 60px rgba(15,23,42,0.95);
      text-align: center;
      animation: popupIn .25s ease-out;
    }

    .success-icon {
      width: 68px;
      height: 68px;
      border-radius: 999px;
      margin: 0 auto 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      background: radial-gradient(circle at 30% 20%, #bbf7d0, #22c55e);
      color: #052e16;
      box-shadow: 0 0 24px rgba(34,197,94,0.75);
    }

    .success-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #f9fafb;
      margin-bottom: 0.25rem;
    }

    .success-text {
      font-size: 0.9rem;
      color: #cbd5f5;
      margin-bottom: 1rem;
    }

    .success-btn {
      padding: 0.6rem 1.4rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      background: linear-gradient(135deg,#4f46e5,#6366f1);
      color: #fff;
      box-shadow: 0 14px 32px rgba(79,70,229,0.7);
    }

    @keyframes popupIn {
      from {
        opacity: 0;
        transform: translateY(12px) scale(0.96);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
  </style>
</head>

<body>

  <div class="scan-container">
    <div class="header">
      <div class="avatar-circle">üë©üèª‚Äçüéì</div>
      <div class="user-text">
        <div class="name" id="studentName">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
        <div class="id">ID : <span id="studentId">-</span></div>
      </div>
    </div>

    <h2>‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
    <div class="subtitle">
      ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡∏≤‡∏Å QR CODE ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å TOKEN ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
    </div>

    <div class="mode-switch">
      <button id="btnCamera" class="mode-btn active">üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
      <button id="btnToken" class="mode-btn">üî¢ ‡∏Å‡∏£‡∏≠‡∏Å TOKEN</button>
    </div>

    <!-- ‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
    <div id="reader"></div>

    <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å TOKEN -->
    <div class="token-box" id="tokenBox">
      <label for="tokenInput">TOKEN 6 ‡∏ï‡∏±‡∏ß</label>
      <input type="text" id="tokenInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô ABC123">
    </div>

    <button class="btn-main" id="checkBtn">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠</button>

    <div id="statusMsg"></div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="success-modal">
    <div class="success-card">
      <div class="success-icon">‚úî</div>
      <div class="success-title">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
      <div class="success-text" id="successText">
        ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß
      </div>
      <button class="success-btn" id="closeSuccess">‡∏ï‡∏Å‡∏•‡∏á</button>
    </div>
  </div>

</body>
</html>
